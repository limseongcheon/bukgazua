(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[698],{1394:(e,s,a)=>{"use strict";a.d(s,{Avatar:()=>n,AvatarFallback:()=>c,AvatarImage:()=>d});var t=a(5155),r=a(2115),l=a(5977),i=a(9434);let n=r.forwardRef((e,s)=>{let{className:a,...r}=e;return(0,t.jsx)(l.bL,{ref:s,className:(0,i.cn)("relative flex h-10 w-10 shrink-0 overflow-hidden rounded-full",a),...r})});n.displayName=l.bL.displayName;let d=r.forwardRef((e,s)=>{let{className:a,...r}=e;return(0,t.jsx)(l._V,{ref:s,className:(0,i.cn)("aspect-square h-full w-full",a),...r})});d.displayName=l._V.displayName;let c=r.forwardRef((e,s)=>{let{className:a,...r}=e;return(0,t.jsx)(l.H4,{ref:s,className:(0,i.cn)("flex h-full w-full items-center justify-center rounded-full bg-muted",a),...r})});c.displayName=l.H4.displayName},4165:(e,s,a)=>{"use strict";a.d(s,{Cf:()=>h,Es:()=>p,HM:()=>m,L3:()=>f,c7:()=>u,lG:()=>d,rr:()=>j,zM:()=>c});var t=a(5155),r=a(2115),l=a(5821),i=a(5318),n=a(9434);let d=l.bL,c=l.l9,o=l.ZL,m=l.bm,x=r.forwardRef((e,s)=>{let{className:a,...r}=e;return(0,t.jsx)(l.hJ,{ref:s,className:(0,n.cn)("fixed inset-0 z-50 bg-black/80 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",a),...r})});x.displayName=l.hJ.displayName;let h=r.forwardRef((e,s)=>{let{className:a,children:r,...d}=e;return(0,t.jsxs)(o,{children:[(0,t.jsx)(x,{}),(0,t.jsxs)(l.UC,{ref:s,className:(0,n.cn)("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",a),...d,children:[r,(0,t.jsxs)(l.bm,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[(0,t.jsx)(i.A,{className:"h-4 w-4"}),(0,t.jsx)("span",{className:"sr-only",children:"Close"})]})]})]})});h.displayName=l.UC.displayName;let u=e=>{let{className:s,...a}=e;return(0,t.jsx)("div",{className:(0,n.cn)("flex flex-col space-y-1.5 text-center sm:text-left",s),...a})};u.displayName="DialogHeader";let p=e=>{let{className:s,...a}=e;return(0,t.jsx)("div",{className:(0,n.cn)("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",s),...a})};p.displayName="DialogFooter";let f=r.forwardRef((e,s)=>{let{className:a,...r}=e;return(0,t.jsx)(l.hE,{ref:s,className:(0,n.cn)("text-lg font-semibold leading-none tracking-tight",a),...r})});f.displayName=l.hE.displayName;let j=r.forwardRef((e,s)=>{let{className:a,...r}=e;return(0,t.jsx)(l.VY,{ref:s,className:(0,n.cn)("text-sm text-muted-foreground",a),...r})});j.displayName=l.VY.displayName},5573:(e,s,a)=>{Promise.resolve().then(a.bind(a,7907))},6695:(e,s,a)=>{"use strict";a.d(s,{BT:()=>c,Wu:()=>o,ZB:()=>d,Zp:()=>i,aR:()=>n});var t=a(5155),r=a(2115),l=a(9434);let i=r.forwardRef((e,s)=>{let{className:a,...r}=e;return(0,t.jsx)("div",{ref:s,className:(0,l.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",a),...r})});i.displayName="Card";let n=r.forwardRef((e,s)=>{let{className:a,...r}=e;return(0,t.jsx)("div",{ref:s,className:(0,l.cn)("flex flex-col space-y-1.5 p-6",a),...r})});n.displayName="CardHeader";let d=r.forwardRef((e,s)=>{let{className:a,...r}=e;return(0,t.jsx)("h3",{ref:s,className:(0,l.cn)("text-2xl font-semibold leading-none tracking-tight",a),...r})});d.displayName="CardTitle";let c=r.forwardRef((e,s)=>{let{className:a,...r}=e;return(0,t.jsx)("p",{ref:s,className:(0,l.cn)("text-sm text-muted-foreground",a),...r})});c.displayName="CardDescription";let o=r.forwardRef((e,s)=>{let{className:a,...r}=e;return(0,t.jsx)("div",{ref:s,className:(0,l.cn)("p-6 pt-0",a),...r})});o.displayName="CardContent",r.forwardRef((e,s)=>{let{className:a,...r}=e;return(0,t.jsx)("div",{ref:s,className:(0,l.cn)("flex items-center p-6 pt-0",a),...r})}).displayName="CardFooter"},7262:(e,s,a)=>{"use strict";a.d(s,{S:()=>d});var t=a(5155),r=a(2115),l=a(6981),i=a(518),n=a(9434);let d=r.forwardRef((e,s)=>{let{className:a,...r}=e;return(0,t.jsx)(l.bL,{ref:s,className:(0,n.cn)("peer h-4 w-4 shrink-0 rounded-sm border border-primary ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground",a),...r,children:(0,t.jsx)(l.C1,{className:(0,n.cn)("flex items-center justify-center text-current"),children:(0,t.jsx)(i.A,{className:"h-4 w-4"})})})});d.displayName=l.bL.displayName},7313:(e,s,a)=>{"use strict";a.d(s,{Tabs:()=>n,TabsContent:()=>o,TabsList:()=>d,TabsTrigger:()=>c});var t=a(5155),r=a(2115),l=a(704),i=a(9434);let n=l.bL,d=r.forwardRef((e,s)=>{let{className:a,...r}=e;return(0,t.jsx)(l.B8,{ref:s,className:(0,i.cn)("inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground",a),...r})});d.displayName=l.B8.displayName;let c=r.forwardRef((e,s)=>{let{className:a,...r}=e;return(0,t.jsx)(l.l9,{ref:s,className:(0,i.cn)("inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm",a),...r})});c.displayName=l.l9.displayName;let o=r.forwardRef((e,s)=>{let{className:a,...r}=e;return(0,t.jsx)(l.UC,{ref:s,className:(0,i.cn)("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",a),...r})});o.displayName=l.UC.displayName},7907:(e,s,a)=>{"use strict";a.r(s),a.d(s,{default:()=>ec});var t=a(5155),r=a(2115),l=a(3013),i=a(644),n=a(4386),d=a(831),c=a(3908),o=a(285),m=a(6695),x=a(2523),h=a(5057),u=a(9434);let p=r.forwardRef((e,s)=>{let{className:a,...r}=e;return(0,t.jsx)("table",{ref:s,className:(0,u.cn)("w-full caption-bottom text-sm",a),...r})});p.displayName="Table";let f=r.forwardRef((e,s)=>{let{className:a,...r}=e;return(0,t.jsx)("thead",{ref:s,className:(0,u.cn)("[&_tr]:border-b",a),...r})});f.displayName="TableHeader";let j=r.forwardRef((e,s)=>{let{className:a,...r}=e;return(0,t.jsx)("tbody",{ref:s,className:(0,u.cn)("[&_tr:last-child]:border-0",a),...r})});j.displayName="TableBody",r.forwardRef((e,s)=>{let{className:a,...r}=e;return(0,t.jsx)("tfoot",{ref:s,className:(0,u.cn)("border-t bg-muted/50 font-medium [&>tr]:last:border-b-0",a),...r})}).displayName="TableFooter";let g=r.forwardRef((e,s)=>{let{className:a,...r}=e;return(0,t.jsx)("tr",{ref:s,className:(0,u.cn)("border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted",a),...r})});g.displayName="TableRow";let N=r.forwardRef((e,s)=>{let{className:a,...r}=e;return(0,t.jsx)("th",{ref:s,className:(0,u.cn)("h-12 px-4 text-left align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0",a),...r})});N.displayName="TableHead";let y=r.forwardRef((e,s)=>{let{className:a,...r}=e;return(0,t.jsx)("td",{ref:s,className:(0,u.cn)("p-4 align-middle [&:has([role=checkbox])]:pr-0",a),...r})});y.displayName="TableCell",r.forwardRef((e,s)=>{let{className:a,...r}=e;return(0,t.jsx)("caption",{ref:s,className:(0,u.cn)("mt-4 text-sm text-muted-foreground",a),...r})}).displayName="TableCaption";var b=a(8539),v=a(4636),w=a(87),C=a(9409),k=a(4477);let S=(0,k.createServerReference)("001f6b1b4dbc5c25f6bf1e2993dcc4b69bae5cc87d",k.callServer,void 0,k.findSourceMapURL,"logout");var D=a(3349);function R(){return(0,t.jsx)("form",{action:S,children:(0,t.jsxs)(o.$,{type:"submit",variant:"outline",children:[(0,t.jsx)(D.A,{className:"mr-2 h-4 w-4"}),"로그아웃"]})})}var T=a(7481),A=a(1920),F=a(172),U=a(7223),M=a(594),E=a(5943),J=a(5074),z=a(7313),L=a(7262),P=a(2278);let V=P.bL,O=P.l9,G=P.ZL,q=r.forwardRef((e,s)=>{let{className:a,...r}=e;return(0,t.jsx)(P.hJ,{className:(0,u.cn)("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",a),...r,ref:s})});q.displayName=P.hJ.displayName;let Y=r.forwardRef((e,s)=>{let{className:a,...r}=e;return(0,t.jsxs)(G,{children:[(0,t.jsx)(q,{}),(0,t.jsx)(P.UC,{ref:s,className:(0,u.cn)("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",a),...r})]})});Y.displayName=P.UC.displayName;let Z=e=>{let{className:s,...a}=e;return(0,t.jsx)("div",{className:(0,u.cn)("flex flex-col space-y-2 text-center sm:text-left",s),...a})};Z.displayName="AlertDialogHeader";let $=e=>{let{className:s,...a}=e;return(0,t.jsx)("div",{className:(0,u.cn)("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",s),...a})};$.displayName="AlertDialogFooter";let _=r.forwardRef((e,s)=>{let{className:a,...r}=e;return(0,t.jsx)(P.hE,{ref:s,className:(0,u.cn)("text-lg font-semibold",a),...r})});_.displayName=P.hE.displayName;let B=r.forwardRef((e,s)=>{let{className:a,...r}=e;return(0,t.jsx)(P.VY,{ref:s,className:(0,u.cn)("text-sm text-muted-foreground",a),...r})});B.displayName=P.VY.displayName;let H=r.forwardRef((e,s)=>{let{className:a,...r}=e;return(0,t.jsx)(P.rc,{ref:s,className:(0,u.cn)((0,o.r)(),a),...r})});H.displayName=P.rc.displayName;let W=r.forwardRef((e,s)=>{let{className:a,...r}=e;return(0,t.jsx)(P.ZD,{ref:s,className:(0,u.cn)((0,o.r)({variant:"outline"}),"mt-2 sm:mt-0",a),...r})});W.displayName=P.ZD.displayName;var I=a(4165),K=a(1394),Q=a(8082);let X=Q.Kq,ee=Q.bL,es=Q.l9,ea=r.forwardRef((e,s)=>{let{className:a,sideOffset:r=4,...l}=e;return(0,t.jsx)(Q.UC,{ref:s,sideOffset:r,className:(0,u.cn)("z-50 overflow-hidden rounded-md border bg-popover px-3 py-1.5 text-sm text-popover-foreground shadow-md animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",a),...l})});function et(e){let{caregiver:s,onStatusChange:a}=e,{toast:l}=(0,T.dj)(),[i,n]=(0,r.useTransition)();return(0,t.jsxs)(C.l6,{defaultValue:s.status,onValueChange:e=>{n(async()=>{try{let t=await fetch("/api/caregivers",{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({id:s.id,status:e})}),r=await t.json();if(!t.ok)throw Error(r.error||"상태 업데이트에 실패했습니다.");a(r.updatedCaregiver)}catch(e){l({variant:"destructive",title:"오류",description:e.message})}})},disabled:i,children:[(0,t.jsx)(C.bq,{className:"w-full",children:i?(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)(F.A,{className:"h-4 w-4 animate-spin"}),(0,t.jsx)("span",{children:"변경 중.."})]}):(0,t.jsx)(C.yv,{})}),(0,t.jsxs)(C.gC,{children:[(0,t.jsx)(C.eb,{value:"가능",children:(0,t.jsxs)("span",{className:"flex items-center gap-2",children:[(0,t.jsx)("span",{className:"h-2 w-2 rounded-full bg-green-500"}),"가능"]})}),(0,t.jsx)(C.eb,{value:"불가능",children:(0,t.jsxs)("span",{className:"flex items-center gap-2",children:[(0,t.jsx)("span",{className:"h-2 w-2 rounded-full bg-red-500"}),"불가능"]})})]})]})}ea.displayName=Q.UC.displayName;let er=r.memo(e=>{let{onSuccess:s}=e,{toast:a}=(0,T.dj)(),i=(0,r.useRef)(null),[n,d]=(0,r.useState)(!1),[p,f]=(0,r.useState)({}),[j,g]=(0,r.useState)(),[N,y]=(0,r.useState)(!1),k=(0,r.useMemo)(()=>["신입",...Array.from({length:9},(e,s)=>"".concat(s+1,"년")),"10년 이상"],[]),S=e=>{let s={};return e.get("name")||(s.name="이름은 필수입니다."),e.get("phone")||(s.phone="전화번호는 필수입니다."),j||(s.birthDate="생년월일은 필수입니다."),e.get("gender")||(s.gender="성별은 필수입니다."),e.get("experience")||(s.experience="경력은 필수입니다."),f(s),0===Object.keys(s).length},D=async e=>{e.preventDefault(),f({});let t=new FormData(e.currentTarget);if(!S(t))return void a({variant:"destructive",title:"입력 오류",description:"필수 항목을 모두 입력해주세요."});d(!0);let r={name:t.get("name"),phone:t.get("phone"),photoUrl:t.get("photoUrl"),birthDate:j?(0,l.GP)(j,"yyyy-MM-dd"):void 0,gender:t.get("gender"),certifications:t.get("certifications"),experience:t.get("experience"),specialNotes:t.get("specialNotes")};try{let e=await fetch("/api/caregivers",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(r)}),t=await e.json();if(!e.ok)throw Error(t.error||"서버에서 오류가 발생했습니다.");if(t.success&&t.newCaregiver){var n;a({title:"성공",description:"'".concat(t.newCaregiver.name,"' 님이 성공적으로 등록되었습니다.")}),null==(n=i.current)||n.reset(),g(void 0),f({}),s(t.newCaregiver)}else throw Error(t.error||"알 수 없는 오류가 발생했습니다.")}catch(s){let e=s.message||"서버 응답이 올바르지 않습니다. 다시 시도해주세요.";f({form:e}),a({variant:"destructive",title:"오류",description:e})}finally{d(!1)}};return(0,t.jsx)("div",{className:"max-w-2xl mx-auto",children:(0,t.jsx)("form",{onSubmit:D,ref:i,noValidate:!0,children:(0,t.jsxs)(m.Zp,{children:[(0,t.jsxs)(m.aR,{children:[(0,t.jsx)(m.ZB,{children:"새 간병인 등록"}),(0,t.jsx)(m.BT,{children:"아래 양식을 작성하여 새 간병인을 시스템에 추가합니다."})]}),(0,t.jsxs)(m.Wu,{className:"space-y-6",children:[(0,t.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsxs)(h.J,{htmlFor:"name",children:["이름",(0,t.jsx)("span",{className:"text-destructive",children:"*"})]}),(0,t.jsx)(x.p,{id:"name",name:"name",placeholder:"홍길동",disabled:n}),p.name&&(0,t.jsx)("p",{className:"text-sm font-medium text-destructive",children:p.name})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsxs)(h.J,{htmlFor:"phone",children:["전화번호",(0,t.jsx)("span",{className:"text-destructive",children:"*"})]}),(0,t.jsx)(x.p,{id:"phone",name:"phone",placeholder:"(-) 없이 숫자만 입력",disabled:n}),p.phone&&(0,t.jsx)("p",{className:"text-sm font-medium text-destructive",children:p.phone})]})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(h.J,{htmlFor:"photoUrl",children:"사진 URL (선택)"}),(0,t.jsx)(x.p,{id:"photoUrl",name:"photoUrl",placeholder:"https://i.imgur.com/OSsWUN6.jpg",disabled:n})]}),(0,t.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsxs)(h.J,{htmlFor:"birthDate",children:["생년월일",(0,t.jsx)("span",{className:"text-destructive",children:"*"})]}),(0,t.jsxs)(v.AM,{open:N,onOpenChange:y,children:[(0,t.jsx)(v.Wv,{asChild:!0,children:(0,t.jsxs)(o.$,{variant:"outline",className:(0,u.cn)("w-full justify-start text-left font-normal",!j&&"text-muted-foreground",p.birthDate&&"border-destructive"),children:[(0,t.jsx)(A.A,{className:"mr-2 h-4 w-4"}),j?(0,l.GP)(j,"PPP",{locale:c.ko}):(0,t.jsx)("span",{children:"날짜 선택"})]})}),(0,t.jsx)(v.hl,{className:"w-auto p-0",align:"start",children:(0,t.jsx)(w.V,{mode:"single",selected:j,onSelect:e=>{g(e||void 0),y(!1)},captionLayout:"dropdown-buttons",fromYear:1940,toYear:new Date().getFullYear(),disabled:e=>e>new Date||e<new Date("1940-01-01"),initialFocus:!0,locale:c.ko})})]}),p.birthDate&&(0,t.jsx)("p",{className:"text-sm font-medium text-destructive",children:p.birthDate})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsxs)(h.J,{htmlFor:"gender",children:["성별",(0,t.jsx)("span",{className:"text-destructive",children:"*"})]}),(0,t.jsxs)(C.l6,{name:"gender",disabled:n,children:[(0,t.jsx)(C.bq,{className:(0,u.cn)(p.gender&&"border-destructive"),children:(0,t.jsx)(C.yv,{placeholder:"성별 선택"})}),(0,t.jsxs)(C.gC,{children:[(0,t.jsx)(C.eb,{value:"남성",children:"남성"}),(0,t.jsx)(C.eb,{value:"여성",children:"여성"})]})]}),p.gender&&(0,t.jsx)("p",{className:"text-sm font-medium text-destructive",children:p.gender})]})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(h.J,{htmlFor:"certifications",children:"보유 자격증 (쉼표로 구분)"}),(0,t.jsx)(x.p,{id:"certifications",name:"certifications",placeholder:"예: 요양보호사 1급, 간호조무사",disabled:n})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsxs)(h.J,{htmlFor:"experience",children:["경력",(0,t.jsx)("span",{className:"text-destructive",children:"*"})]}),(0,t.jsxs)(C.l6,{name:"experience",disabled:n,children:[(0,t.jsx)(C.bq,{className:(0,u.cn)(p.experience&&"border-destructive"),children:(0,t.jsx)(C.yv,{placeholder:"경력 선택"})}),(0,t.jsx)(C.gC,{children:k.map(e=>(0,t.jsx)(C.eb,{value:e,children:e},e))})]}),p.experience&&(0,t.jsx)("p",{className:"text-sm font-medium text-destructive",children:p.experience})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(h.J,{htmlFor:"specialNotes",children:"특기사항 (선택)"}),(0,t.jsx)(b.T,{id:"specialNotes",name:"specialNotes",placeholder:"예: 치매 환자 돌봄 경험 풍부, 요리 가능",disabled:n})]}),p.form&&(0,t.jsx)("p",{className:"text-sm font-medium text-destructive",children:p.form}),(0,t.jsx)(o.$,{type:"submit",disabled:n,className:"w-full",size:"lg",children:n?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(F.A,{className:"mr-2 h-4 w-4 animate-spin"}),"등록 중..."]}):"간병인 추가"})]})]})})})});er.displayName="CaregiverForm";let el=r.memo(e=>{let{selectedCount:s,isDeleting:a,onDelete:r}=e;return 0===s?null:(0,t.jsxs)("div",{className:"bg-muted p-2 rounded-md mb-4 flex items-center justify-between transition-all duration-300",children:[(0,t.jsxs)("span",{className:"text-sm font-medium text-muted-foreground",children:[s,"명 선택됨"]}),(0,t.jsxs)(V,{children:[(0,t.jsx)(O,{asChild:!0,children:(0,t.jsxs)(o.$,{variant:"destructive",disabled:a,size:"sm",children:[a?(0,t.jsx)(F.A,{className:"mr-2 h-4 w-4 animate-spin"}):(0,t.jsx)(U.A,{className:"mr-2 h-4 w-4"}),"선택 항목 삭제"]})}),(0,t.jsxs)(Y,{children:[(0,t.jsxs)(Z,{children:[(0,t.jsx)(_,{children:"정말로 삭제하시겠습니까?"}),(0,t.jsxs)(B,{children:["선택한 ",s,"명의 간병인 정보가 영구적으로 삭제됩니다. 이 작업은 되돌릴 수 없습니다."]})]}),(0,t.jsxs)($,{children:[(0,t.jsx)(W,{children:"취소"}),(0,t.jsx)(H,{onClick:r,className:(0,o.r)({variant:"destructive"}),children:"삭제"})]})]})]})]})});el.displayName="ActionToolbar";let ei=r.memo(e=>{let{caregivers:s,selectedRowIds:a,isDeleting:r,onSelectAll:i,onSelectRow:n,onDeleteSelected:d,onEditSuccess:c,onEditRequest:m}=e;return s&&0!==s.length?(0,t.jsx)(X,{children:(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsx)(el,{selectedCount:a.length,isDeleting:r,onDelete:d}),(0,t.jsx)("div",{className:"relative max-h-[70vh] overflow-auto",children:(0,t.jsxs)(p,{children:[(0,t.jsx)(f,{className:"sticky top-0 z-20 bg-secondary",children:(0,t.jsxs)(g,{children:[(0,t.jsx)(N,{className:"w-[50px] sticky left-0 bg-secondary z-10",children:(0,t.jsx)(L.S,{onCheckedChange:i,checked:a.length===s.length&&s.length>0,"aria-label":"모두 선택"})}),(0,t.jsx)(N,{className:"min-w-[70px]",children:"사진"}),(0,t.jsx)(N,{className:"min-w-[120px] sticky left-[50px] bg-secondary z-10",children:"이름"}),(0,t.jsx)(N,{className:"min-w-[150px]",children:"연락처"}),(0,t.jsx)(N,{className:"min-w-[120px]",children:"생년월일"}),(0,t.jsx)(N,{className:"min-w-[80px]",children:"성별"}),(0,t.jsx)(N,{className:"min-w-[150px] text-center",children:"상태"}),(0,t.jsx)(N,{className:"min-w-[200px]",children:"자격증"}),(0,t.jsx)(N,{className:"min-w-[120px]",children:"경력"}),(0,t.jsx)(N,{className:"min-w-[250px]",children:"특기사항"}),(0,t.jsx)(N,{className:"min-w-[180px] text-center",children:(0,t.jsxs)("div",{className:"flex items-center justify-center gap-1",children:["근무 불가 날짜",(0,t.jsxs)(ee,{children:[(0,t.jsx)(es,{asChild:!0,children:(0,t.jsx)(M.A,{className:"h-4 w-4 text-muted-foreground"})}),(0,t.jsx)(ea,{children:(0,t.jsxs)("div",{className:"text-sm p-1 max-w-xs",children:[(0,t.jsx)("p",{children:"날짜를 클릭하여 근무 불가일을 토글합니다."}),(0,t.jsxs)("p",{className:"mt-1",children:[(0,t.jsx)("span",{className:"font-bold",children:"Shift + 클릭"}),"으로 기간 선택이 가능합니다."]})]})})]})]})}),(0,t.jsx)(N,{className:"min-w-[100px] text-center sticky right-0 bg-secondary z-10",children:"관리"})]})}),(0,t.jsx)(j,{children:s.map(e=>(0,t.jsxs)(g,{"data-state":a.includes(e.id)?"selected":"",children:[(0,t.jsx)(y,{className:"sticky left-0 z-10 data-[state=selected]:bg-muted bg-background",children:(0,t.jsx)(L.S,{onCheckedChange:s=>n(e.id,s),checked:a.includes(e.id),"aria-label":"".concat(e.name," 선택")})}),(0,t.jsx)(y,{children:(0,t.jsxs)(K.Avatar,{children:[(0,t.jsx)(K.AvatarImage,{src:e.photoUrl,alt:e.name}),(0,t.jsx)(K.AvatarFallback,{children:e.name.substring(0,1)})]})}),(0,t.jsx)(y,{className:"sticky left-[50px] z-10 font-medium data-[state=selected]:bg-muted bg-background",children:e.name}),(0,t.jsx)(y,{children:e.phone||"-"}),(0,t.jsx)(y,{children:e.birthDate?(0,l.GP)(new Date(e.birthDate),"yyyy-MM-dd"):"-"}),(0,t.jsx)(y,{children:e.gender||"-"}),(0,t.jsx)(y,{children:(0,t.jsx)(et,{caregiver:e,onStatusChange:c})}),(0,t.jsx)(y,{className:"max-w-[200px] truncate",children:(0,t.jsxs)(ee,{children:[(0,t.jsx)(es,{children:(0,t.jsx)("p",{children:e.certifications||"-"})}),(0,t.jsx)(ea,{children:(0,t.jsx)("p",{children:e.certifications||"자격증 정보 없음"})})]})}),(0,t.jsx)(y,{children:e.experience||"-"}),(0,t.jsx)(y,{className:"max-w-[250px] truncate",children:(0,t.jsxs)(ee,{children:[(0,t.jsx)(es,{children:(0,t.jsx)("p",{children:e.specialNotes||"-"})}),(0,t.jsx)(ea,{children:(0,t.jsx)("p",{className:"max-w-xs whitespace-pre-wrap",children:e.specialNotes||"특기사항 없음"})})]})}),(0,t.jsx)(y,{children:(0,t.jsx)(ed,{caregiver:e,onEditSuccess:c})}),(0,t.jsx)(y,{className:"text-center sticky right-0 z-10 data-[state=selected]:bg-muted bg-background",children:(0,t.jsxs)(o.$,{variant:"ghost",size:"icon",onClick:()=>m(e),children:[(0,t.jsx)(E.A,{className:"h-4 w-4"}),(0,t.jsx)("span",{className:"sr-only",children:"수정"})]})})]},e.id))})]})})]})}):(0,t.jsx)("div",{className:"text-center py-10 text-muted-foreground",children:"일치하는 간병인이 없습니다."})});ei.displayName="CaregiverTable";let en=r.memo(e=>{let{caregiver:s,onEditSuccess:a,onCancel:n}=e,{toast:d}=(0,T.dj)(),[m,p]=(0,r.useState)(!1),[f,j]=(0,r.useState)({}),[g,N]=(0,r.useState)(s.birthDate?(0,i.o)(new Date(s.birthDate)):void 0),y=(0,r.useMemo)(()=>["신입",...Array.from({length:9},(e,s)=>"".concat(s+1,"년")),"10년 이상"],[]),k=async e=>{e.preventDefault(),p(!0),j({});let t=new FormData(e.currentTarget),r={id:s.id,name:t.get("name"),phone:t.get("phone"),photoUrl:t.get("photoUrl"),birthDate:g?(0,l.GP)(g,"yyyy-MM-dd"):void 0,gender:t.get("gender"),certifications:t.get("certifications"),experience:t.get("experience"),specialNotes:t.get("specialNotes")};try{let e=await fetch("/api/caregivers",{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(r)}),s=await e.json();if(!e.ok)throw Error(s.error||"수정 실패");d({title:"성공",description:"간병인 정보가 수정되었습니다."}),a(s.updatedCaregiver)}catch(e){j({form:e.message}),d({variant:"destructive",title:"오류",description:e.message})}finally{p(!1)}};return(0,t.jsxs)(I.Cf,{className:"sm:max-w-3xl",children:[(0,t.jsxs)(I.c7,{children:[(0,t.jsx)(I.L3,{children:"간병인 정보 수정"}),(0,t.jsxs)(I.rr,{children:[s.name," 님의 정보를 수정합니다. 변경사항을 저장해주세요."]})]}),(0,t.jsxs)("form",{onSubmit:k,className:"max-h-[70vh] overflow-y-auto px-1",children:[(0,t.jsxs)("div",{className:"space-y-6 py-4",children:[(0,t.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsxs)(h.J,{htmlFor:"edit-name",children:["이름",(0,t.jsx)("span",{className:"text-destructive",children:"*"})]}),(0,t.jsx)(x.p,{id:"edit-name",name:"name",defaultValue:s.name,required:!0})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsxs)(h.J,{htmlFor:"edit-phone",children:["전화번호",(0,t.jsx)("span",{className:"text-destructive",children:"*"})]}),(0,t.jsx)(x.p,{id:"edit-phone",name:"phone",defaultValue:s.phone,required:!0})]})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(h.J,{htmlFor:"edit-photoUrl",children:"사진 URL"}),(0,t.jsx)(x.p,{id:"edit-photoUrl",name:"photoUrl",defaultValue:s.photoUrl||""})]}),(0,t.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsxs)(h.J,{htmlFor:"edit-birthDate",children:["생년월일",(0,t.jsx)("span",{className:"text-destructive",children:"*"})]}),(0,t.jsxs)(v.AM,{children:[(0,t.jsx)(v.Wv,{asChild:!0,children:(0,t.jsxs)(o.$,{variant:"outline",className:(0,u.cn)("w-full justify-start text-left font-normal",!g&&"text-muted-foreground"),children:[(0,t.jsx)(A.A,{className:"mr-2 h-4 w-4"}),g?(0,l.GP)(g,"PPP",{locale:c.ko}):(0,t.jsx)("span",{children:"날짜 선택"})]})}),(0,t.jsx)(v.hl,{className:"w-auto p-0",children:(0,t.jsx)(w.V,{mode:"single",selected:g,onSelect:e=>N(e||void 0),captionLayout:"dropdown-buttons",fromYear:1940,toYear:new Date().getFullYear(),initialFocus:!0,locale:c.ko})})]})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsxs)(h.J,{htmlFor:"edit-gender",children:["성별",(0,t.jsx)("span",{className:"text-destructive",children:"*"})]}),(0,t.jsxs)(C.l6,{name:"gender",defaultValue:s.gender,children:[(0,t.jsx)(C.bq,{children:(0,t.jsx)(C.yv,{placeholder:"성별 선택"})}),(0,t.jsxs)(C.gC,{children:[(0,t.jsx)(C.eb,{value:"남성",children:"남성"}),(0,t.jsx)(C.eb,{value:"여성",children:"여성"})]})]})]})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(h.J,{htmlFor:"edit-certifications",children:"보유 자격증 (쉼표로 구분)"}),(0,t.jsx)(x.p,{id:"edit-certifications",name:"certifications",defaultValue:s.certifications||""})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsxs)(h.J,{htmlFor:"edit-experience",children:["경력",(0,t.jsx)("span",{className:"text-destructive",children:"*"})]}),(0,t.jsxs)(C.l6,{name:"experience",defaultValue:s.experience,children:[(0,t.jsx)(C.bq,{children:(0,t.jsx)(C.yv,{placeholder:"경력 선택"})}),(0,t.jsx)(C.gC,{children:y.map(e=>(0,t.jsx)(C.eb,{value:e,children:e},e))})]})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(h.J,{htmlFor:"edit-specialNotes",children:"특기사항"}),(0,t.jsx)(b.T,{id:"edit-specialNotes",name:"specialNotes",defaultValue:s.specialNotes||"",rows:5})]}),f.form&&(0,t.jsx)("p",{className:"text-sm font-medium text-destructive",children:f.form})]}),(0,t.jsxs)(I.Es,{className:"mt-6",children:[(0,t.jsx)(I.HM,{asChild:!0,children:(0,t.jsx)(o.$,{type:"button",variant:"secondary",onClick:n,children:"취소"})}),(0,t.jsxs)(o.$,{type:"submit",disabled:m,children:[m&&(0,t.jsx)(F.A,{className:"mr-2 h-4 w-4 animate-spin"}),"변경사항 저장"]})]})]})]})});en.displayName="EditCaregiverDialog";let ed=r.memo(e=>{let{caregiver:s,onEditSuccess:a}=e,{toast:m}=(0,T.dj)(),[x,h]=(0,r.useState)(!1),u=(0,r.useRef)(null),[p,f]=(0,r.useState)(new Set((s.unavailableDates||[]).map(e=>(0,l.GP)((0,i.o)(new Date(e)),"yyyy-MM-dd")))),j=(0,r.useMemo)(()=>Array.from(p).map(e=>new Date(e)),[p]),g=(0,r.useCallback)((e,s,a)=>{let t;if(!e)return;let r=(0,l.GP)(e,"yyyy-MM-dd");if(a.shiftKey&&u.current){let s=new Set(p),a=u.current<e?u.current:e,r=u.current>e?u.current:e,i=(0,n.c)(r,a);for(let e=0;e<=i;e++){let t=(0,l.GP)((0,d.f)(a,e),"yyyy-MM-dd");s.add(t)}t=s}else{let e=new Set(p);e.has(r)?e.delete(r):e.add(r),t=e}u.current=e,f(t),y(Array.from(t))},[p]),N=(0,r.useCallback)(()=>{f(new Set),y([]),u.current=null},[]),y=(0,r.useCallback)(async e=>{h(!0);try{let t=await fetch("/api/caregivers",{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({id:s.id,unavailableDates:e})}),r=await t.json();if(!t.ok)throw Error(r.error||"날짜 업데이트 실패");m({title:"성공",description:"근무 불가 날짜가 업데이트되었습니다."}),a(r.updatedCaregiver),f(new Set(r.updatedCaregiver.unavailableDates||[]))}catch(e){m({variant:"destructive",title:"오류",description:e.message}),f(new Set((s.unavailableDates||[]).map(e=>(0,l.GP)((0,i.o)(new Date(e)),"yyyy-MM-dd"))))}finally{h(!1)}},[s.id,s.unavailableDates,a,m]);return(0,t.jsxs)(v.AM,{children:[(0,t.jsx)(v.Wv,{asChild:!0,children:(0,t.jsxs)(o.$,{variant:"outline",className:"w-full justify-start font-normal text-sm",children:[(0,t.jsx)(A.A,{className:"mr-2 h-4 w-4"}),x?(0,t.jsx)(F.A,{className:"h-4 w-4 animate-spin"}):j.length>0?"".concat(j.length,"일 선택됨"):"날짜 선택"]})}),(0,t.jsx)(v.hl,{className:"w-auto p-0",align:"start",children:(0,t.jsx)(w.V,{mode:"multiple",min:0,selected:j,onDayClick:g,disabled:x,locale:c.ko,footer:(0,t.jsx)("div",{className:"p-2 border-t flex justify-end",children:(0,t.jsx)(o.$,{variant:"ghost",size:"sm",onClick:N,disabled:x||0===j.length,children:"전체 해제"})})})})]})});function ec(){let[e,s]=(0,r.useState)([]),[a,l]=(0,r.useState)(!0),[i,n]=(0,r.useState)("register"),[d,c]=(0,r.useState)(""),{toast:o}=(0,T.dj)(),[h,u]=(0,r.useState)([]),[p,f]=(0,r.useState)(!1),[j,g]=(0,r.useState)(null);(0,r.useEffect)(()=>{(async()=>{try{l(!0);let e=await fetch("/api/caregivers"),a=await e.json();if(!e.ok)throw Error(a.error||"간병인 목록을 불러오지 못했습니다.");let t=(a||[]).sort((e,s)=>(s.id||0)-(e.id||0));s(t)}catch(e){o({variant:"destructive",title:"오류",description:e.message||"간병인 목록을 불러오지 못했습니다."}),s([])}finally{l(!1)}})()},[o]);let N=(0,r.useMemo)(()=>d?e.filter(e=>e.name.toLowerCase().includes(d.toLowerCase())):e,[e,d]),y=(0,r.useCallback)(e=>{s(s=>[e,...s].sort((e,s)=>(s.id||0)-(e.id||0))),n("manage")},[]),b=(0,r.useCallback)(e=>{s(s=>s.map(s=>s.id===e.id?e:s)),g(null)},[]),v=(0,r.useCallback)(e=>{s(s=>s.filter(s=>!e.includes(s.id)))},[]),w=(0,r.useCallback)(e=>{u(e?N.map(e=>e.id):[])},[N]),C=(0,r.useCallback)((e,s)=>{u(a=>s?[...a,e]:a.filter(s=>s!==e))},[]),k=(0,r.useCallback)(async()=>{f(!0);try{let e=await fetch("/api/caregivers",{method:"DELETE",headers:{"Content-Type":"application/json"},body:JSON.stringify({ids:h})}),s=await e.json();if(!e.ok)throw Error(s.error||"삭제 중 오류가 발생했습니다.");o({title:"성공",description:"".concat(s.count,"명의 간병인이 삭제되었습니다.")}),v(h),u([])}catch(e){o({variant:"destructive",title:"오류",description:e.message})}finally{f(!1)}},[h,v,o]),S=(0,r.useCallback)(e=>{g(e)},[]),D=(0,r.useCallback)(()=>{g(null)},[]);return(0,t.jsxs)("div",{className:"container py-10",children:[(0,t.jsxs)("div",{className:"flex justify-between items-center mb-10",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("h1",{className:"text-4xl font-bold",children:"관리자 페이지"}),(0,t.jsx)("p",{className:"text-muted-foreground mt-2",children:"간병인 정보를 등록하고 관리합니다."})]}),(0,t.jsx)(R,{})]}),(0,t.jsxs)(z.Tabs,{value:i,onValueChange:n,className:"w-full",children:[(0,t.jsxs)(z.TabsList,{className:"grid w-full grid-cols-2",children:[(0,t.jsx)(z.TabsTrigger,{value:"register",children:"새 간병인 등록"}),(0,t.jsx)(z.TabsTrigger,{value:"manage",children:"간병인 관리"})]}),(0,t.jsx)(z.TabsContent,{value:"register",className:"mt-6",children:(0,t.jsx)(er,{onSuccess:y})}),(0,t.jsx)(z.TabsContent,{value:"manage",className:"mt-6",children:(0,t.jsxs)(m.Zp,{children:[(0,t.jsxs)(m.aR,{children:[(0,t.jsx)(m.ZB,{children:"등록된 간병인 목록"}),(0,t.jsxs)("div",{className:"flex justify-between items-center gap-4 pt-2",children:[(0,t.jsxs)(m.BT,{children:[e.length,"명의 간병인이 등록되어 있습니다."]}),(0,t.jsxs)("div",{className:"relative w-full max-w-xs",children:[(0,t.jsx)(x.p,{placeholder:"이름으로 검색...",value:d,onChange:e=>c(e.target.value),className:"pl-10"}),(0,t.jsx)(J.A,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-5 w-5 text-muted-foreground"})]})]})]}),(0,t.jsx)(m.Wu,{children:a?(0,t.jsx)("div",{className:"flex justify-center items-center py-10",children:(0,t.jsx)(F.A,{className:"h-8 w-8 animate-spin text-muted-foreground"})}):(0,t.jsx)(ei,{caregivers:N,selectedRowIds:h,isDeleting:p,onSelectAll:w,onSelectRow:C,onDeleteSelected:k,onEditSuccess:b,onEditRequest:S})})]})})]}),(0,t.jsx)(I.lG,{open:!!j,onOpenChange:e=>!e&&D(),children:j&&(0,t.jsx)(en,{caregiver:j,onEditSuccess:b,onCancel:D})})]})}ed.displayName="UnavailableDatesManager"}},e=>{var s=s=>e(e.s=s);e.O(0,[172,889,355,991,24,490,441,684,358],()=>s(5573)),_N_E=e.O()}]);